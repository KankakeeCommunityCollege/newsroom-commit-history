var default_user_name="kankakeecommcollege";function selectChannel(e){$.ajax({url:"https://www.googleapis.com/youtube/v3/channels",type:"GET",dataType:"json",data:{part:"contentDetails",forUsername:e,key:$("meta[name=yt-api-k]").attr("value")},success:function(e){if($("#yt_list").html(""),e.pageInfo.totalResults>0){console.dir(e.items);for(var t=0,n=e.items;t<n.length;t++){n[t];getVideos("PLEnNvZd4X-lVSveRGpbsXLCmf7hYXX97q")}}else $("input#user_name").addClass("error"),$("div#channel_input > .info").show().html("This user not exists")},error:function(e){console.dir(e)}})}function getVideos(e,t=""){var n="",a=$.ajax({url:"https://www.googleapis.com/youtube/v3/playlistItems",type:"GET",dataType:"json",data:{part:"snippet",playlistId:"PLEnNvZd4X-lVFQK8Ke8jkpr7NvdTSI5W9",maxResults:10,pageToken:t,key:$("meta[name=yt-api-k]").attr("value")},success:function(a){console.dir(a),a.nextPageToken&&(console.log(a.nextPageToken),n='<button id="load-more" data-next-page="'+a.nextPageToken+'" data-yt-id="'+e+'">More...</button>'),""===t&&$("#yt_player").attr("src","https://youtube.com/embed/"+a.items[0].snippet.resourceId.videoId+"?controls=1&showinfo=0&rel=0");for(var o=0;o<10;o++){var s=$("<h3>").append(a.items[o].snippet.title),i=$("<img>").attr("src",a.items[o].snippet.thumbnails.medium.url),l=a.items[o].snippet.resourceId.videoId,r=$("<a class='video-link' href='#'>").data("videoid",l).append(i),c=$("<div class='yt-item'>").append(r,s);$("#yt_list").append(c)}$("#yt_list").append(n)}});console.dir(a)}selectChannel(default_user_name),$("#yt_list").on("click","#load-more",function(){$(this).animate({transform:"scaleX(4)",opacity:"0.1"},function(){getVideos($(this).data("yt-id"),$(this).data("next-page")),$(this).remove()})}),$("#yt_list").on("click","a.video-link",function(){var e=$(this).data("videoid");$("#yt_player").attr("src","https://youtube.com/embed/"+e+"?controls=1&showinfo=0&rel=0&autoplay=1")}),$("#user_name").on({keyup:function(e){$(this).removeClass("error"),$("div#channel_input > .info").hide().html(""),13===e.keyCode&&selectChannel($(this).val())},click:function(){$(this).removeClass("error"),$("div#channel_input > .info").hide().html(""),$("#user_name").select()}}),$("#sbm").on("click",function(){selectChannel($("#user_name").val())}),$(window).on("load",function(){$("#user_name").val(default_user_name),$("#user_name").focus()}),$("#yt_list").on("scroll",function(){Math.round($(this).scrollTop()+$(this).innerHeight(),10)>=Math.round($(this)[0].scrollHeight,10)-5&&$("#load-more").trigger("click")});
